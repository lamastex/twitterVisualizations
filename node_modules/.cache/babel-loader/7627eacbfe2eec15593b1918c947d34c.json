{"ast":null,"code":"var _jsxFileName = \"/Users/ammaraldhahyani/Desktop/twitter.visual/twitterVisualizations/src/components/Graph2.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport theLinks from \"../data/dummy_links.json\";\nimport theNodes from \"../data/dummy_nodes.json\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar circleEnlargeConstant = 2;\nvar circleClickedStrokeWidth = 5;\nvar link;\nvar node;\nvar margin;\nvar width;\nvar height;\n\nfunction Graph2() {\n  _s();\n\n  const [links, setLinks] = useState(theLinks);\n  const [nodes, setNodes] = useState(theNodes);\n  const [tweetId, setTweetId] = useState(null);\n  const d3Graph = useRef();\n\n  const drag = simulation => {\n    const dragstarted = (event, d) => {\n      if (!event.active) simulation.alphaTarget(0.3).restart();\n      d.fx = d.x;\n      d.fy = d.y;\n    };\n\n    const dragged = (event, d) => {\n      d.fx = event.x;\n      d.fy = event.y;\n    };\n\n    const dragended = (event, d) => {\n      if (!event.active) simulation.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    };\n\n    return d3.drag().on(\"start\", dragstarted).on(\"drag\", dragged).on(\"end\", dragended);\n  };\n\n  useEffect(() => {\n    //Specify display sizes\n    margin = {\n      top: 20,\n      right: 30,\n      bottom: 30,\n      left: 30\n    };\n    width = parseInt(d3.select(\"#graph\").style(\"width\")) - margin.left - margin.right;\n    height = parseInt(d3.select(\"#graph\").style(\"height\")) - margin.top - margin.bottom; //set up the Graph\n\n    const svg = d3.select(d3Graph.current).attr(\"viewBox\", [0, 0, width, height]); // Create zoomable area\n\n    const g = svg.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\").attr(\"cursor\", \"grab\").on(\"click\", clickView); // Create simulation\n\n    var simulation = d3.forceSimulation() //.force(\"link\", d3.forceLink().id(function(d) { return d.id; }))\n    .force(\"charge\", d3.forceManyBody().strength(-5)).force(\"center\", d3.forceCenter(width / 2, height / 2));\n    link = g.append(\"g\").selectAll(\"line\").attr(\"class\", \"links\").data(links).enter().append(\"line\").attr(\"stroke-width\", d => {\n      return Math.sqrt(d.weight / 1000);\n    });\n    node = g.append(\"g\").selectAll(\"circle\").attr(\"class\", \"nodes\").data(nodes).enter().append(\"circle\").attr(\"r\", d => Math.sqrt(d.weight / 100) + 2).on(\"mouseover\", mouseoverCircle).on(\"mouseout\", mouseoutCircle).on(\"click\", clickCircle).call(drag(simulation)); ///\n\n    svg.call(d3.zoom().extent([[0, 0], [width, height]]).scaleExtent([1, 8]).on(\"zoom\", (event, d) => {\n      g.attr(\"transform\", event.transform);\n    }));\n    var filteredLinks = links.filter(link => link.weight >= 1); // Link nodes and links to the simulation\n\n    simulation.nodes(nodes).on(\"tick\", ticked).force(\"link\", d3.forceLink(filteredLinks).id(function (d) {\n      return d.id;\n    })); // Compute several steps before rendering\n    //loading.remove(); // Remove loading text\n\n    for (var i = 0, n = 150; i < n; ++i) {\n      simulation.tick();\n    } ///\n\n  }, []); // Updates for each simulation tick\n\n  function ticked() {\n    link.attr(\"x1\", function (d) {\n      return d.source.x;\n    }).attr(\"y1\", function (d) {\n      return d.source.y;\n    }).attr(\"x2\", function (d) {\n      return d.target.x;\n    }).attr(\"y2\", function (d) {\n      return d.target.y;\n    });\n    node.attr(\"cx\", function (d) {\n      return d.x;\n    }).attr(\"cy\", function (d) {\n      return d.y;\n    });\n  }\n  /**\n   * Handle mouse hover on circle. Enlarge circle.\n   */\n\n\n  function mouseoverCircle() {\n    // Get circle\n    var circle = d3.select(this); // Display activated circle\n\n    circle.attr(\"r\", circle.attr(\"r\") * circleEnlargeConstant);\n  }\n  /**\n   * Handle mouse out on circle. Resize circle.\n   */\n\n\n  function mouseoutCircle() {\n    // Get circle\n    var circle = d3.select(this); // Display idle circle\n\n    circle.attr(\"r\", circle.attr(\"r\") / circleEnlargeConstant);\n  }\n  /**\n   * Handle click on zoomable area. That is, handle click outside a node which\n   * is considered a deselecting click => deselect previously clicked node\n   * and remove displayed tweets.\n   */\n\n\n  function clickView() {\n    // Remove clicked status on clicked nodes\n    d3.selectAll(\".clicked\").attr(\"stroke-width\", \"0\").classed(\"clicked\", false); // Get the <ul> element with id=\"myList\"\n\n    var list = document.getElementById(\"theTweet\"); // If the <ul> element has any child nodes, remove its first child node\n\n    if (list.hasChildNodes()) {\n      list.removeChild(list.childNodes[0]);\n    }\n\n    document.getElementById(\"theTweet\").innerHTML = \"\"; // Remove timeline\n    //document.getElementById(\"tweet\").innerHTML = \"\";\n  }\n  /**\n   * Handle click on a tweet circle. Display the clicked tweet and let the tweet\n   * appear selected by adding a stroke to it.\n   */\n\n\n  function clickCircle(event, d) {\n    // Remove results from old click\n    clickView(); // Add stroke width and set clicked class\n\n    d3.select(this).attr(\"stroke-width\", circleClickedStrokeWidth).classed(\"clicked\", true);\n    console.log(d.idNr);\n    setTweetId(d.id); // Display tweet\n    //twttr.widgets.createTimeline(\n    //  {\n    //    sourceType: \"profile\",\n    //    userId: d.idNr,\n    //  },\n    //  document.getElementById(\"tweet\"), // Tweet div\n    //\n    //  {\n    //    height: height,\n    //  }\n    //);\n  }\n\n  useEffect(() => {\n    const anchor = document.createElement(\"a\");\n    anchor.setAttribute(\"class\", \"twitter-timeline\");\n    anchor.setAttribute(\"data-theme\", \"dark\");\n    anchor.setAttribute(\"height\", \"800\");\n    anchor.setAttribute(\"width\", \"500\");\n    anchor.setAttribute(\"data-chrome\", \"noheader nofooter noborders\");\n    anchor.setAttribute(\"href\", `https://twitter.com/${tweetId}`);\n    document.getElementsByClassName(\"twitter-embed\")[0].appendChild(anchor);\n    const script = document.createElement(\"script\");\n    script.setAttribute(\"src\", \"https://platform.twitter.com/widgets.js\");\n    document.getElementsByClassName(\"twitter-embed\")[0].appendChild(script);\n  }, [tweetId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex justify-center items-center p-20\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"shadow-lg bg-gray-100\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"graph\",\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          ref: d3Graph\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"twitter-embed\",\n        id: \"theTweet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 262,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Graph2, \"aNSZM4cV1saXK3kNdyFJoltihdM=\");\n\n_c = Graph2;\nexport default Graph2;\n\nvar _c;\n\n$RefreshReg$(_c, \"Graph2\");","map":{"version":3,"sources":["/Users/ammaraldhahyani/Desktop/twitter.visual/twitterVisualizations/src/components/Graph2.js"],"names":["React","useState","useEffect","useRef","d3","theLinks","theNodes","circleEnlargeConstant","circleClickedStrokeWidth","link","node","margin","width","height","Graph2","links","setLinks","nodes","setNodes","tweetId","setTweetId","d3Graph","drag","simulation","dragstarted","event","d","active","alphaTarget","restart","fx","x","fy","y","dragged","dragended","on","top","right","bottom","left","parseInt","select","style","svg","current","attr","g","append","clickView","forceSimulation","force","forceManyBody","strength","forceCenter","selectAll","data","enter","Math","sqrt","weight","mouseoverCircle","mouseoutCircle","clickCircle","call","zoom","extent","scaleExtent","transform","filteredLinks","filter","ticked","forceLink","id","i","n","tick","source","target","circle","classed","list","document","getElementById","hasChildNodes","removeChild","childNodes","innerHTML","console","log","idNr","anchor","createElement","setAttribute","getElementsByClassName","appendChild","script"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport theLinks from \"../data/dummy_links.json\";\nimport theNodes from \"../data/dummy_nodes.json\";\n\nvar circleEnlargeConstant = 2;\nvar circleClickedStrokeWidth = 5;\n\n\nvar link;\nvar node;\nvar margin;\nvar width;\nvar height;\n\nfunction Graph2() {\n  const [links, setLinks] = useState(theLinks);\n  const [nodes, setNodes] = useState(theNodes);\n\n  const [tweetId, setTweetId] = useState(null);\n\n\n  const d3Graph = useRef();\n\n  const drag = (simulation) => {\n    const dragstarted = (event, d) => {\n      if (!event.active) simulation.alphaTarget(0.3).restart();\n      d.fx = d.x;\n      d.fy = d.y;\n    };\n\n    const dragged = (event, d) => {\n      d.fx = event.x;\n      d.fy = event.y;\n    };\n\n    const dragended = (event, d) => {\n      if (!event.active) simulation.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    };\n\n    return d3\n      .drag()\n      .on(\"start\", dragstarted)\n      .on(\"drag\", dragged)\n      .on(\"end\", dragended);\n  };\n\n\n  useEffect(() => {\n    //Specify display sizes\n    margin = { top: 20, right: 30, bottom: 30, left: 30 };\n    width =\n      parseInt(d3.select(\"#graph\").style(\"width\")) - margin.left - margin.right;\n    height =\n      parseInt(d3.select(\"#graph\").style(\"height\")) -\n      margin.top -\n      margin.bottom;\n\n\n    //set up the Graph\n    const svg = d3\n      .select(d3Graph.current)\n      .attr(\"viewBox\", [0, 0, width, height]);\n\n    // Create zoomable area\n    const g = svg\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n      .attr(\"cursor\", \"grab\")\n      .on(\"click\", clickView);\n\n    // Create simulation\n    var simulation = d3\n      .forceSimulation()\n      //.force(\"link\", d3.forceLink().id(function(d) { return d.id; }))\n      .force(\"charge\", d3.forceManyBody().strength(-5))\n      .force(\"center\", d3.forceCenter(width / 2, height / 2));\n\n    link = g\n      .append(\"g\")\n      .selectAll(\"line\")\n      .attr(\"class\", \"links\")\n      .data(links)\n      .enter()\n      .append(\"line\")\n      .attr(\"stroke-width\", (d) => {\n        return Math.sqrt(d.weight / 1000);\n      });\n\n    node = g\n      .append(\"g\")\n      .selectAll(\"circle\")\n      .attr(\"class\", \"nodes\")\n      .data(nodes)\n      .enter()\n      .append(\"circle\")\n      .attr(\"r\", (d) => Math.sqrt(d.weight / 100) + 2)\n      .on(\"mouseover\", mouseoverCircle)\n      .on(\"mouseout\", mouseoutCircle)\n      .on(\"click\", clickCircle)\n      .call(drag(simulation));\n\n    ///\n\n    svg.call(\n      d3\n        .zoom()\n        .extent([\n          [0, 0],\n          [width, height],\n        ])\n        .scaleExtent([1, 8])\n        .on(\"zoom\", (event, d) => {\n          g.attr(\"transform\", event.transform);\n        })\n    );\n\n    var filteredLinks = links.filter((link) => link.weight >= 1);\n\n    // Link nodes and links to the simulation\n    simulation\n      .nodes(nodes)\n      .on(\"tick\", ticked)\n      .force(\n        \"link\",\n        d3.forceLink(filteredLinks).id(function (d) {\n          return d.id;\n        })\n      );\n\n    // Compute several steps before rendering\n    //loading.remove(); // Remove loading text\n    for (var i = 0, n = 150; i < n; ++i) {\n      simulation.tick();\n    }\n\n    ///\n  }, []);\n\n  // Updates for each simulation tick\n  function ticked() {\n    link\n      .attr(\"x1\", function (d) {\n        return d.source.x;\n      })\n      .attr(\"y1\", function (d) {\n        return d.source.y;\n      })\n      .attr(\"x2\", function (d) {\n        return d.target.x;\n      })\n      .attr(\"y2\", function (d) {\n        return d.target.y;\n      });\n\n    node\n      .attr(\"cx\", function (d) {\n        return d.x;\n      })\n      .attr(\"cy\", function (d) {\n        return d.y;\n      });\n  }\n\n\n  /**\n   * Handle mouse hover on circle. Enlarge circle.\n   */\n  function mouseoverCircle() {\n    // Get circle\n    var circle = d3.select(this);\n\n    // Display activated circle\n    circle.attr(\"r\", circle.attr(\"r\") * circleEnlargeConstant);\n  }\n\n  /**\n   * Handle mouse out on circle. Resize circle.\n   */\n  function mouseoutCircle() {\n    // Get circle\n    var circle = d3.select(this);\n\n    // Display idle circle\n    circle.attr(\"r\", circle.attr(\"r\") / circleEnlargeConstant);\n  }\n\n  /**\n   * Handle click on zoomable area. That is, handle click outside a node which\n   * is considered a deselecting click => deselect previously clicked node\n   * and remove displayed tweets.\n   */\n  function clickView() {\n    // Remove clicked status on clicked nodes\n    d3.selectAll(\".clicked\")\n      .attr(\"stroke-width\", \"0\")\n      .classed(\"clicked\", false);\n\n    // Get the <ul> element with id=\"myList\"\n    var list = document.getElementById(\"theTweet\");\n\n    // If the <ul> element has any child nodes, remove its first child node\n    if (list.hasChildNodes()) {\n      list.removeChild(list.childNodes[0]);\n    }\n\n    document.getElementById(\"theTweet\").innerHTML = \"\";\n\n    // Remove timeline\n    //document.getElementById(\"tweet\").innerHTML = \"\";\n  }\n\n  /**\n   * Handle click on a tweet circle. Display the clicked tweet and let the tweet\n   * appear selected by adding a stroke to it.\n   */\n  function clickCircle(event, d) {\n    // Remove results from old click\n\n    clickView();\n\n    // Add stroke width and set clicked class\n    d3.select(this)\n      .attr(\"stroke-width\", circleClickedStrokeWidth)\n      .classed(\"clicked\", true);\n\n    console.log(d.idNr);\n    setTweetId(d.id);\n    // Display tweet\n\n    //twttr.widgets.createTimeline(\n    //  {\n    //    sourceType: \"profile\",\n    //    userId: d.idNr,\n    //  },\n    //  document.getElementById(\"tweet\"), // Tweet div\n    //\n    //  {\n    //    height: height,\n    //  }\n    //);\n  }\n\n  useEffect(() => {\n    const anchor = document.createElement(\"a\");\n    anchor.setAttribute(\"class\", \"twitter-timeline\");\n    anchor.setAttribute(\"data-theme\", \"dark\");\n    anchor.setAttribute(\"height\", \"800\");\n    anchor.setAttribute(\"width\", \"500\");\n    anchor.setAttribute(\"data-chrome\", \"noheader nofooter noborders\");\n    anchor.setAttribute(\"href\", `https://twitter.com/${tweetId}`);\n    document.getElementsByClassName(\"twitter-embed\")[0].appendChild(anchor);\n\n    const script = document.createElement(\"script\");\n    script.setAttribute(\"src\", \"https://platform.twitter.com/widgets.js\");\n    document.getElementsByClassName(\"twitter-embed\")[0].appendChild(script);\n  }, [tweetId]);\n\n  return (\n    <div className=\"flex justify-center items-center p-20\">\n      <div className=\"shadow-lg bg-gray-100\">\n        <div id=\"graph\">\n          <svg ref={d3Graph}></svg>\n        </div>\n\n        <div className=\"twitter-embed\" id=\"theTweet\"></div>\n      </div>\n    </div>\n  );\n}\n\nexport default Graph2;\n"]},"metadata":{},"sourceType":"module"}